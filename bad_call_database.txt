SELECT DISTINCT(`unanswered_calls_limit`) as `distinct_limit`, COUNT(`unanswered_calls_limit`) as `counter` FROM `agent_data` GROUP BY `unanswered_calls_limit` ORDER BY `counter` DESC LIMIT 20;
+----------------+---------+
| distinct_limit | counter |
+----------------+---------+
|              3 |      27 |
|             99 |      19 |
|              0 |      15 |
|              5 |      12 |
|              2 |       4 |
|             30 |       2 |
|              4 |       2 |
|              1 |       1 |
|             88 |       1 |
|              6 |       1 |
|              7 |       1 |
+----------------+---------+
11 rows in set (0.00 sec)



show CREATE TABLE agent_data;
+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| agent_data | CREATE TABLE `agent_data` (
  `id` int(8) NOT NULL auto_increment,
  `account_id` int(11) NOT NULL default '0',
  `parent_id` int(8) NOT NULL default '0',
  `phone_number` varchar(64) NOT NULL default '',
  `hard_login_time` int(11) default '0',
  `soft_login_time` int(8) default '0',
  `hard_logoff_time` int(8) default '0',
  `soft_logoff_time` int(8) default '0',
  `unanswered_calls_limit` int(8) default '1',
  `unanswered_calls_cnt` int(8) default '0',
  `next_call_can_start` int(8) default '0',
  `last_call_end_time` int(8) default '0',
  `calls_served` int(8) default '0',
  `is_queue_supervisor` int(1) default '0',
  `availability_status` char(3) default 'NA',
  `last_call_assigned_time` int(8) default '0',
  `login_status` int(11) default '0',
  `call_status` char(3) default 'NA',
  `call_record_id` int(11) NOT NULL default '0',
  `last_phone_number` varchar(64) NOT NULL default '',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `id_2` (`id`,`account_id`,`parent_id`),
  KEY `account_id` (`account_id`),
  KEY `parent_id` (`parent_id`)
) ENGINE=MyISAM AUTO_INCREMENT=126 DEFAULT CHARSET=latin1 |
+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

last_outgoing	last_incoming	other_side	my_side	voice_mail	low_volume	copped_words	background_noise	static_interference	repeat_sentences	call_completed	resolution_recommendation




CREATE TABLE `bad_call_data` (
  `id` int(11) NOT NULL auto_increment,
  `caller_details` varchar(64) NOT NULL default '',
  `timestamp_of_feedback_call` int(11) default '0',
  `last_outgoing` int(1) default '0',
  `last_incoming` int(1) default '0',
  `other_side` int(1) default '0',
  `my_side` int(1) default '0',
  `voice_mail` varchar(64) default '',
  `low_volume` int(1) default '0',
  `chopped_words` int(1) default '0',
  `background_noise` int(1) default '0',
  `static_interference` int(1) default '0',
  `repeat_sentences` int(1) default '0',
  `call_completed` int(1) default '0',
  `resolution_recommendation` varchar(64) NOT NULL default '',
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=19 DEFAULT CHARSET=latin1;

|
+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

INSERT INTO `bad_call_data` (`caller_details`, `timestamp_of_feedback_call`, `last_outgoing`, `last_incoming`, `other_side`, `my_side`, `voice_mail`, `low_volume`, `chopped_words`, `background_noise`, `static_interference`, `repeat_sentences`, `call_completed`, `resolution_recommendation`) VALUES ('testing', UNIX_TIMESTAMP(), 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 'Testing 9');

INSERT INTO `bad_call_data` (`caller_details`, `timestamp_of_feedback_call`, `last_outgoing`, `last_incoming`, `other_side`, `my_side`, `voice_mail`, `low_volume`, `chopped_words`, `background_noise`, `static_interference`, `repeat_sentences`, `call_completed`, `resolution_recommendation`)
VALUES(
'testing', # `caller_details`
UNIX_TIMESTAMP(), # `timestamp_of_feedback_call`
1, # `last_outgoing`
1, # `last_incoming`
1, # `other_side`
1, # `my_side`
0, # `voice_mail`
0, # `low_volume`
0, # `chopped_words`
0, # `background_noise`
0, # `static_interference`
0, # `repeat_sentences`
1, # `call_completed`
'Call Back to caller' # `resolution_recommendation`
);

php reading params:

$from_number = $argv[1];
$call_id = $argv[2];
$call_id = urldecode( $call_id );
$temp_file_name = $argv[3];
$call_completed = $argv[4];
$last_outgoing= $argv[5];
$last_incoming = $argv[6];
$my_side = $argv[7];
$other_side = $argv[8];
$low_volume = $argv[9];
$chopped_words = $argv[10];
$background_noise = $argv[11];
$static_interference = $argv[12];
$repeat_sentences = $argv[13];
$resolution_recommendation = $argv[14];


PHP Command line arguments:
$from_number $call_id $temp_file_name $call_completed $last_outgoing $last_incoming $my_side $other_side $low_volume $chopped_words $background_noise $static_interference $repeat_sentences $resolution_recommendation


XScript call:
/usr/local/registrator/lib/mserver/app/process_bad_audio_complaint.php $FROM_NUMBER $CALL_ID $TEMP_FILE_NAME $STATUS $LAST_OUTGOING $LAST_INCOMING $MY_SIDE $OTHER_SIDE $LOW_VOLUME $CHOPPED_WORDS $BACKGROUND_NOISE $STATIC_INTERFERENCE $REPEAT_SENTENCES $CALL_COMPLETED $RESOLUTION_RECOMMENDATION



CLEAN TEST Entries:
DELETE FROM `bad_call_data` WHERE `id` < 8;



Test plan:
Common to all cases:
Step 1: Dial *09
Case 1: No reaction to prompt
Step 2:
Expected Response: "Goodbye" (CORRECT)

Case 2: Press '2' at prompt
Step 2:
Expected Response: "Goodbye" (CORRECT)

Case 3: Press '3' at prompt
Step 2:
Expected Response: Q.2  (CORRECT)
Case 3.1: Press '3' at prompt
Expected Response: Q.3 Verification line then Q.4 and then Q.4.2
Actual Response: Q.4 and then Q.4.2(WRONG)

